YUI.add("moodle-availability_relativedate-form",function(o,e){M.availability_relativedate=M.availability_relativedate||{},M.availability_relativedate.form=o.Object(M.core_availability.plugin),M.availability_relativedate.form.timeFields=null,M.availability_relativedate.form.startFields=null,M.availability_relativedate.form.isSection=null,M.availability_relativedate.form.warningStrings=null,M.availability_relativedate.form.defaultFields=null,M.availability_relativedate.form.initInner=function(e,t,i,a,l,s){this.timeFields=e,this.startFields=t,this.isSection=i,this.warningStrings=a,this.activitySelector=l,this.defaultFields=s},M.availability_relativedate.form.getNode=function(e){for(var t,i,a,l,s='<span class="availability-relativedate">',r=0,n=0,r=0;r<this.warningStrings.length;r++)s+='<div class="alert alert-warning alert-block fade in " role="alert">'+this.warningStrings[r]+"</div>";for(s+='<label><select name="relativenumber">',r=1;r<=this.defaultFields[0];r++)s+='<option value="'+r+'">'+r+"</option>";for(s=s+"</select></label> "+'<label><select name="relativedmw">',r=0;r<this.timeFields.length;r++)s+='<option value="'+(t=this.timeFields[r]).field+'">'+t.display+"</option>";for(s=s+"</select></label> "+'<label><select name="relativestart">',r=0;r<this.startFields.length;r++)s+='<option value="'+(t=this.startFields[r]).field+'">'+t.display+"</option>";for(s=s+"</select></label>"+('<label><select name="relativecoursemodule"'+(7!=e.s?' style="display: none;"':"")+">"),r=i=0;r<this.activitySelector.length;r++)for(s+="<option disabled>"+this.activitySelector[r].name+"</option>",n=0;n<this.activitySelector[r].coursemodules.length;n++)s+='<option value="'+this.activitySelector[r].coursemodules[n].id+'"',0==this.activitySelector[r].coursemodules[n].completionenabled?s+=" disabled":i=i||this.activitySelector[r].coursemodules[n].id,s+=">"+this.activitySelector[r].coursemodules[n].name+"</option>";return a=o.Node.create("<span>"+(s+="</select></label>")+"</span>"),r=this.defaultFields[1],e.n!==undefined&&(r=e.n),a.one("select[name=relativenumber]").set("value",r),r=this.defaultFields[2],e.d!==undefined&&(r=e.d),a.one("select[name=relativedmw]").set("value",r),r=this.defaultFields[3],e.s!==undefined&&(r=e.s),a.one("select[name=relativestart]").set("value",r),r=i,e.m!==undefined&&(r=e.m),a.one("select[name=relativecoursemodule]").set("value",r),M.availability_relativedate.form.addedEvents||(M.availability_relativedate.form.addedEvents=!0,e=o.one(".availability-field"),l=function(e){var e=e.ancestor("span.availability_relativedate"),t=e.one("select[name=relativestart]");"7"==t.get("value")?e.one("select[name=relativecoursemodule]").set("style",""):e.one("select[name=relativecoursemodule]").set("style","display: none;"),M.core_availability.form.update()},e.delegate("change",function(){l(this)},".availability_relativedate select")),a},M.availability_relativedate.form.fillValue=function(e,t){e.n=Number(t.one("select[name=relativenumber]").get("value")),e.d=Number(t.one("select[name=relativedmw]").get("value")),e.s=Number(t.one("select[name=relativestart]").get("value")),e.m=0,7==e.s&&(e.m=Number(t.one("select[name=relativecoursemodule]").get("value")))},M.availability_relativedate.form.fillErrors=function(e,t){this.fillValue({},t)}},"@VERSION@",{requires:["base","node","event","moodle-core_availability-form"]});